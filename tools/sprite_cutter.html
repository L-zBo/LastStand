<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>ç²¾çµå›¾è£å‰ªå·¥å…·</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background: #1a1a2e;
            color: #fff;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        h1 { color: #ffd700; }
        .preview {
            display: flex;
            gap: 20px;
            margin: 20px 0;
        }
        .source-image {
            border: 2px solid #ffd700;
            image-rendering: pixelated;
        }
        .grid-overlay {
            position: relative;
            display: inline-block;
        }
        .sprites-output {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 20px;
        }
        .sprite-item {
            background: #2a2a4a;
            padding: 10px;
            border-radius: 8px;
            text-align: center;
        }
        .sprite-item img {
            image-rendering: pixelated;
            width: 64px;
            height: 64px;
        }
        .sprite-item p {
            margin: 5px 0 0;
            font-size: 12px;
            color: #aaa;
        }
        button {
            background: #ffd700;
            color: #000;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            margin: 5px;
        }
        button:hover {
            background: #ffed4a;
        }
        .category {
            margin: 20px 0;
            padding: 15px;
            background: #2a2a4a;
            border-radius: 10px;
        }
        .category h3 {
            color: #4ecdc4;
            margin-top: 0;
        }
        .download-links {
            margin-top: 20px;
        }
        .download-links a {
            display: inline-block;
            margin: 5px;
            padding: 8px 15px;
            background: #3498db;
            color: #fff;
            text-decoration: none;
            border-radius: 5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ® åƒç´ ç²¾çµå›¾è£å‰ªå·¥å…·</h1>
        <p>ä»ç²¾çµå›¾ä¸­æå–å•ä¸ªè§’è‰²ï¼Œå¹¶åˆ†ç±»ä¸ºç©å®¶è§’è‰²å’Œæ€ªç‰©</p>

        <div class="preview">
            <div>
                <h3>åŸå§‹å›¾ç‰‡ (æ”¾å¤§4å€)</h3>
                <div class="grid-overlay">
                    <img id="sourceImg" class="source-image" src="../PNG/yDDd9O.png" style="width: 640px; height: auto;">
                </div>
            </div>
        </div>

        <div>
            <button onclick="cutSprites()">ğŸ”ª è£å‰ªç²¾çµå›¾</button>
            <button onclick="downloadAll()">ğŸ’¾ ä¸‹è½½å…¨éƒ¨</button>
        </div>

        <div class="category" id="playersCategory">
            <h3>ğŸ‘¤ ç©å®¶è§’è‰² (6ç§èŒä¸š)</h3>
            <div class="sprites-output" id="playerSprites"></div>
        </div>

        <div class="category" id="enemiesCategory">
            <h3>ğŸ‘¾ æ€ªç‰©æ•Œäºº</h3>
            <div class="sprites-output" id="enemySprites"></div>
        </div>

        <div class="download-links" id="downloadLinks"></div>
    </div>

    <script>
        // ç²¾çµå›¾é…ç½®
        const SPRITE_WIDTH = 16;
        const SPRITE_HEIGHT = 16;
        const COLS = 10;
        const ROWS = 6;

        // ç©å®¶è§’è‰²æ˜ å°„ (è¡Œ, åˆ—) -> èŒä¸šå
        // æ ¹æ®å›¾ç‰‡åˆ†æé€‰æ‹©æœ€åˆé€‚çš„è§’è‰²
        const PLAYER_SPRITES = {
            'warrior': { row: 0, col: 5, name: 'æˆ˜å£«' },      // è“è‰²éª‘å£«
            'mage': { row: 2, col: 5, name: 'æ³•å¸ˆ' },         // ç´«è‰²æ³•å¸ˆ
            'assassin': { row: 3, col: 3, name: 'åˆºå®¢' },     // é»‘è‰²å¿è€…
            'ranger': { row: 1, col: 7, name: 'æ¸¸ä¾ ' },       // ç»¿è‰²å¼“ç®­æ‰‹
            'summoner': { row: 4, col: 2, name: 'å¬å”¤å¸ˆ' },   // è“è‰²æ³•å¸ˆ
            'knight': { row: 1, col: 1, name: 'éª‘å£«' }        // çº¢è‰²æˆ˜å£«(å¤‡ç”¨)
        };

        // æ€ªç‰©ç±»å‹æ˜ å°„
        const ENEMY_SPRITES = [
            { row: 0, col: 0, name: 'skeleton', displayName: 'éª·é«…' },
            { row: 0, col: 1, name: 'pumpkin', displayName: 'å—ç“œæ€ª' },
            { row: 0, col: 2, name: 'slime_green', displayName: 'ç»¿å²è±å§†' },
            { row: 0, col: 3, name: 'demon_red', displayName: 'çº¢æ¶é­”' },
            { row: 0, col: 7, name: 'robot', displayName: 'æœºå™¨äºº' },
            { row: 0, col: 8, name: 'ghost_white', displayName: 'ç™½å¹½çµ' },
            { row: 1, col: 0, name: 'mushroom', displayName: 'è˜‘è‡æ€ª' },
            { row: 1, col: 3, name: 'orc', displayName: 'å…½äºº' },
            { row: 1, col: 4, name: 'fire_demon', displayName: 'ç«æ¶é­”' },
            { row: 2, col: 0, name: 'bat', displayName: 'è™è ' },
            { row: 2, col: 1, name: 'spider', displayName: 'èœ˜è››' },
            { row: 2, col: 2, name: 'eye', displayName: 'ç‹¬çœ¼æ€ª' },
            { row: 2, col: 7, name: 'golem', displayName: 'çŸ³é­”' },
            { row: 3, col: 0, name: 'ghost_blue', displayName: 'è“å¹½çµ' },
            { row: 3, col: 1, name: 'imp', displayName: 'å°é¬¼' },
            { row: 3, col: 7, name: 'dragon', displayName: 'å°é¾™' },
            { row: 4, col: 0, name: 'slime_blue', displayName: 'è“å²è±å§†' },
            { row: 4, col: 1, name: 'zombie', displayName: 'åƒµå°¸' },
            { row: 4, col: 7, name: 'wolf', displayName: 'ç‹¼' },
            { row: 5, col: 0, name: 'rat', displayName: 'è€é¼ ' },
            { row: 5, col: 1, name: 'snake', displayName: 'è›‡' },
            { row: 5, col: 2, name: 'cat_black', displayName: 'é»‘çŒ«' },
            { row: 5, col: 7, name: 'boss_demon', displayName: 'Bossæ¶é­”' },
        ];

        let spriteImages = {};

        function cutSprites() {
            const img = document.getElementById('sourceImg');
            const playerContainer = document.getElementById('playerSprites');
            const enemyContainer = document.getElementById('enemySprites');

            playerContainer.innerHTML = '';
            enemyContainer.innerHTML = '';
            spriteImages = {};

            // åˆ›å»ºä¸´æ—¶canvas
            const tempCanvas = document.createElement('canvas');
            tempCanvas.width = img.naturalWidth;
            tempCanvas.height = img.naturalHeight;
            const tempCtx = tempCanvas.getContext('2d');
            tempCtx.drawImage(img, 0, 0);

            // è£å‰ªç©å®¶è§’è‰²
            for (const [className, config] of Object.entries(PLAYER_SPRITES)) {
                const spriteCanvas = document.createElement('canvas');
                spriteCanvas.width = SPRITE_WIDTH;
                spriteCanvas.height = SPRITE_HEIGHT;
                const ctx = spriteCanvas.getContext('2d');

                ctx.drawImage(
                    tempCanvas,
                    config.col * SPRITE_WIDTH, config.row * SPRITE_HEIGHT,
                    SPRITE_WIDTH, SPRITE_HEIGHT,
                    0, 0,
                    SPRITE_WIDTH, SPRITE_HEIGHT
                );

                const dataUrl = spriteCanvas.toDataURL('image/png');
                spriteImages[`player_${className}`] = dataUrl;

                const item = document.createElement('div');
                item.className = 'sprite-item';
                item.innerHTML = `
                    <img src="${dataUrl}" alt="${config.name}">
                    <p>${config.name}<br><small>${className}.png</small></p>
                `;
                playerContainer.appendChild(item);
            }

            // è£å‰ªæ€ªç‰©
            for (const enemy of ENEMY_SPRITES) {
                const spriteCanvas = document.createElement('canvas');
                spriteCanvas.width = SPRITE_WIDTH;
                spriteCanvas.height = SPRITE_HEIGHT;
                const ctx = spriteCanvas.getContext('2d');

                ctx.drawImage(
                    tempCanvas,
                    enemy.col * SPRITE_WIDTH, enemy.row * SPRITE_HEIGHT,
                    SPRITE_WIDTH, SPRITE_HEIGHT,
                    0, 0,
                    SPRITE_WIDTH, SPRITE_HEIGHT
                );

                const dataUrl = spriteCanvas.toDataURL('image/png');
                spriteImages[`enemy_${enemy.name}`] = dataUrl;

                const item = document.createElement('div');
                item.className = 'sprite-item';
                item.innerHTML = `
                    <img src="${dataUrl}" alt="${enemy.displayName}">
                    <p>${enemy.displayName}<br><small>${enemy.name}.png</small></p>
                `;
                enemyContainer.appendChild(item);
            }

            // ç”Ÿæˆä¸‹è½½é“¾æ¥
            generateDownloadLinks();
        }

        function generateDownloadLinks() {
            const container = document.getElementById('downloadLinks');
            container.innerHTML = '<h3>ğŸ“¥ ä¸‹è½½é“¾æ¥</h3>';

            for (const [name, dataUrl] of Object.entries(spriteImages)) {
                const link = document.createElement('a');
                link.href = dataUrl;
                link.download = `${name}.png`;
                link.textContent = `${name}.png`;
                container.appendChild(link);
            }
        }

        function downloadAll() {
            for (const [name, dataUrl] of Object.entries(spriteImages)) {
                const link = document.createElement('a');
                link.href = dataUrl;
                link.download = `${name}.png`;
                link.click();
            }
        }

        // é¡µé¢åŠ è½½å®Œæˆåè‡ªåŠ¨è£å‰ª
        document.getElementById('sourceImg').onload = function() {
            setTimeout(cutSprites, 100);
        };
    </script>
</body>
</html>
