# LastStand - Roguelike Survival Game

一款基于网页的肉鸽类（Roguelike）动作生存游戏，支持单人/双人模式。

## 游戏玩法

### 基本操作
- **单人模式**: WASD 或 方向键移动
- **双人模式**: P1 使用 WASD，P2 使用 方向键
- **ESC**: 暂停/继续游戏

### 游戏目标
- 在波次中存活，消灭所有敌人
- 升级角色，获得武器和被动技能
- 挑战Boss，尽可能活得更久

### 职业介绍

| 职业 | 特点 | 生命 | 攻击 | 速度 |
|------|------|------|------|------|
| 战士 | 高生命值和防御力 | 150 | 15 | 3 |
| 法师 | 强大的魔法攻击 | 80 | 25 | 3.5 |
| 刺客 | 高速度和暴击率 | 100 | 20 | 5 |
| 游侠 | 远程攻击和灵活移动 | 110 | 18 | 4 |
| 召唤师 | 召唤随从帮助战斗 | 90 | 12 | 3.2 |

### 游戏机制

#### 波次系统
- 每波消灭所有敌人后可选择奖励
- 每10波出现Boss
- 敌人属性随波次提升

#### 武器进化
- 武器升至满级后，与特定配件合成可进化为更强武器
- 如：剑 + 暴击石 = 圣剑

#### 草丛机制
- 在草丛中可隐身，普通敌人无法追踪
- 精英怪和Boss可以发现草丛中的玩家

### 属性说明

| 属性 | 说明 |
|------|------|
| 生命 | 角色当前/最大生命值 |
| 攻击 | 基础攻击伤害 |
| 速度 | 移动速度 |
| 回血 | 每秒生命恢复 |
| 暴击 | 暴击概率 |
| 暴伤 | 暴击时的伤害倍率 |
| 吸血 | 击杀敌人时恢复生命 |
| 攻速 | 攻击间隔（毫秒） |
| 多重攻击 | 同时攻击的敌人数量 |
| 经验加成 | 经验获取倍率 |

---

## 项目结构

```
LastStand/
├── index.html      # 主页面，包含所有UI结构和CSS引用
├── README.md       # 本文档
├── assets/         # 游戏素材目录
│   ├── sprites/
│   │   ├── players/    # 玩家角色精灵图
│   │   ├── enemies/    # 敌人精灵图
│   │   ├── effects/    # 特效（攻击、爆炸等）
│   │   ├── weapons/    # 武器图标
│   │   └── items/      # 道具拾取物
│   ├── tiles/          # 地图瓦片
│   ├── ui/             # UI元素
│   └── README.md       # 素材获取指南
├── css/            # CSS模块目录
│   ├── base.css        # 基础样式（重置、全局）
│   ├── menu.css        # 开始菜单、职业选择样式
│   ├── game-layout.css # 游戏界面布局（面板、画布）
│   ├── equipment.css   # 武器栏、被动技能栏样式
│   ├── modals.css      # 模态框、暂停界面样式
│   ├── levelup.css     # 升级界面、强化卡片样式
│   ├── save-system.css # 存档系统样式
│   ├── notifications.css # 通知、动画效果
│   └── responsive.css  # 响应式设计
└── js/             # JavaScript模块目录
    ├── config.js   # 游戏配置（画布大小、世界大小、波次参数等）
    ├── data.js     # 游戏数据（职业、武器、Buff、敌人类型）
    ├── assets.js   # 素材管理器（加载、缓存、绘制）
    ├── entities.js # 游戏实体类（玩家、敌人、投射物、召唤物等）
    ├── ui.js       # UI相关函数（更新显示、升级选择、通知等）
    ├── save.js     # 存档系统（保存、读取、存档槽管理）
    ├── wave.js     # 波次系统（敌人生成、波次完成检测）
    └── main.js     # 主逻辑（游戏循环、初始化、事件处理）
```

## 文件说明

### index.html
主HTML文件，定义了游戏的所有界面元素：
- 开始界面（人数选择、职业选择）
- 存档选择界面
- 游戏主界面（画布、UI面板、控制按钮）
- 暂停界面
- 升级选择界面
- 游戏结束界面

### CSS文件

所有CSS模块文件直接在index.html中引用。

#### css/base.css
基础样式：
- CSS重置
- 全局字体和颜色
- 通用类（.hidden等）

#### css/menu.css
菜单相关样式：
- 开始界面
- 人数选择按钮
- 职业选择卡片

#### css/game-layout.css
游戏界面布局：
- 左侧属性面板
- 游戏画布
- 右侧控制面板
- 玩家状态显示

#### css/equipment.css
装备相关样式：
- 武器栏
- 被动技能栏
- 装备提示框

#### css/modals.css
弹窗样式：
- 通用模态框
- 武器详情弹窗
- 暂停界面
- 倒计时界面

#### css/levelup.css
升级界面样式：
- 强化卡片
- 类型标签
- 游戏结束界面

#### css/save-system.css
存档系统样式：
- 存档槽
- 存档信息显示

#### css/notifications.css
通知和动画：
- 武器进化通知
- 波次提示
- 保存成功提示
- 动画关键帧

#### css/responsive.css
响应式设计：
- 不同屏幕尺寸适配
- 移动端优化

### js/config.js
游戏配置常量：
- 画布和世界尺寸
- 玩家和敌人基础属性
- 波次系统参数
- 障碍物生成参数

### js/data.js
游戏数据定义：
- `CLASSES`: 职业属性和初始武器
- `WEAPONS`: 所有武器数据（伤害、类型、进化路径）
- `BUFFS`: 通用强化效果
- `CLASS_BUFFS`: 职业专属强化
- `ENEMY_TYPES`: 敌人类型列表

### js/entities.js
游戏实体类定义：
- `Particle`: 粒子效果
- `Obstacle`: 障碍物（石头、草丛）
- `Projectile`: 投射物（箭、魔法弹）
- `Summon`: 召唤物
- `WeaponProjectile`: 武器攻击投射物
- `Player`: 玩家（支持双人控制）
- `Enemy`: 敌人（普通、快速、坦克、精英、Boss）

### js/ui.js
UI相关函数：
- `updateUI()`: 实时更新界面数据
- `showLevelUpScreen()`: 显示升级选择
- `showWaveCompleteScreen()`: 显示波次奖励
- `showWeaponDetail()`: 显示武器详情
- `showEvolutionNotification()`: 武器进化提示

### js/save.js
存档系统：
- 6个存档槽
- 保存玩家属性、武器、被动技能、波次进度
- 支持覆盖和删除存档

### js/wave.js
波次管理：
- `startNewWave()`: 开始新波次
- `updateWaveSpawning()`: 更新敌人生成
- `checkWaveComplete()`: 检测波次完成

### js/main.js
主程序逻辑：
- 游戏状态管理
- 游戏循环（更新、渲染）
- 摄像机追踪
- 武器攻击系统
- 碰撞检测
- 事件监听

---

## 技术特点

- 纯原生JavaScript，无框架依赖
- Canvas 2D渲染
- LocalStorage存档
- 响应式设计
- 支持双人同屏

## 开始游戏

直接在浏览器中打开 `index.html` 即可开始游戏。

推荐使用现代浏览器（Chrome、Firefox、Edge）获得最佳体验。
